Menu Cost
================
Cheng,Tien
2023-08-22

#### 計算平均物價有上漲的店家佔總店家比例

- 蛋荒較嚴重時，有較高比例的店家物價是上漲的

``` r
AverageInflationRatePercentage
```

    ##   period percentage
    ## 1    wax  0.3938977
    ## 2   wane  0.3545240

#### 蛋荒較嚴重時期

##### 一、先觀察物價上漲率大於1的店家，總共有68間

``` r
filtered_average_inflation_rate_wax|>
  dplyr::filter(inflation_rate>1)|>
  arrange(desc(inflation_rate))
```

    ##      shopCode inflation_rate
    ## lh86     lh86       1.666936
    ## e1iw     e1iw       1.544980
    ## m8pq     m8pq       1.513661
    ## q8sf     q8sf       1.470082
    ## seuv     seuv       1.463255
    ## d1ls     d1ls       1.392725
    ## a1ef     a1ef       1.377926
    ## b2np     b2np       1.377926
    ## d4hj     d4hj       1.377926
    ## i3cc     i3cc       1.377926
    ## s5te     s5te       1.377926
    ## y0yj     y0yj       1.377926
    ## ynqu     ynqu       1.377926
    ## z4nx     z4nx       1.377926
    ## z5va     z5va       1.377926
    ## pr81     pr81       1.368276
    ## b8db     b8db       1.356694
    ## e3jc     e3jc       1.356694
    ## e7bo     e7bo       1.356694
    ## jedi     jedi       1.356694
    ## q6yu     q6yu       1.356694
    ## lsd5     lsd5       1.346513
    ## z7ko     z7ko       1.318491
    ## z3bf     z3bf       1.301379
    ## y2de     y2de       1.297883
    ## y9tu     y9tu       1.297883
    ## z4wd     z4wd       1.297883
    ## a0ba     a0ba       1.297767
    ## y7lb     y7lb       1.272566
    ## y1ys     y1ys       1.270592
    ## y9yy     y9yy       1.270592
    ## a5ji     a5ji       1.251946
    ## z0zd     z0zd       1.237684
    ## cysg     cysg       1.234744
    ## b9xu     b9xu       1.217724
    ## awvt     awvt       1.178655
    ## o2kj     o2kj       1.163151
    ## vl3z     vl3z       1.152680
    ## pefn     pefn       1.150135
    ## s6bd     s6bd       1.144223
    ## z2km     z2km       1.144223
    ## lz5w     lz5w       1.140634
    ## y7ht     y7ht       1.139434
    ## p5au     p5au       1.137979
    ## artg     artg       1.124208
    ## t4bt     t4bt       1.124208
    ## z9uh     z9uh       1.124208
    ## t2jb     t2jb       1.092371
    ## zmrx     zmrx       1.091177
    ## n4xa     n4xa       1.086190
    ## mi87     mi87       1.078410
    ## y4id     y4id       1.060872
    ## bj3q     bj3q       1.058538
    ## tceg     tceg       1.041160
    ## d3sc     d3sc       1.039642
    ## l0q6     l0q6       1.039642
    ## xdj5     xdj5       1.036009
    ## c2dr     c2dr       1.019872
    ## r2is     r2is       1.014143
    ## u9kk     u9kk       1.005522
    ## t7wo     t7wo       1.001929
    ## d0gl     d0gl       1.000428
    ## d1sd     d1sd       1.000428
    ## e7yc     e7yc       1.000428
    ## e9ke     e9ke       1.000428
    ## l6pf     l6pf       1.000428
    ## z0rb     z0rb       1.000428
    ## z7je     z7je       1.000428

##### *再取出物價上漲率最高的三間做觀察*

##### **shopcode為lh86店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wax_before["lh86"],
                               average_menu_cost_wax_after["lh86"]))
```

    ##   period averageCost
    ## 1 before      39.690
    ## 2  after     210.195

##### lh86店家的熱門品項

``` r
popularItems["lh86"]
```

    ## $lh86
    ## [1] "聖選之最舒肥牛板腱餐盒" "御膳牛五花餐盒"         "滿肉饗宴牛五花燒肉丼"  
    ## [4] "客選雙拼牛五花燒肉丼"   "御上蒲燒鰻魚餐盒"       "胡麻豆腐"

##### lh86店家在wane_before的菜單

``` r
menu_wax$before["lh86"]|>jsonlite::fromJSON()->lh86_wax_before
lh86_wax_before$product
```

    ##  [1] "特選嫩煎豚里肌餐盒" "極緻蒲燒鯛魚餐盒"   "韓式辣炒豬肉餐盒"   "藜麥飯"            
    ##  [5] "泡菜"               "韓式豆芽菜"         "韓式洋蔥絲"         "韓式涼拌毛豆仁"    
    ##  [9] "韓式高麗菜"         "韓式青花菜"         "胡麻洋蔥絲"         "胡麻豆腐"          
    ## [13] "胡麻青花菜"         "海帶芽湯"           "海帶芽豆腐湯"       "澄淨碧綠高山青"    
    ## [17] "鴻運當頭紅玉茶"     "上班搭地鐵觀音"     "清雅芬芳東方美人 "  "皇家錫蘭奶茶"      
    ## [21] "齒留茉香奶茶"       "炭燒鐵觀音奶茶"     "皇家錫蘭珍珠奶茶"   "齒留茉香珍珠奶茶"  
    ## [25] "炭燒鐵觀音珍珠奶茶" "零卡"               "雪碧"               "樹頂蘋果汁"        
    ## [29] "沁涼椰子水"

##### lh86店家在wane_after的菜單

``` r
menu_wax$after["lh86"]|>jsonlite::fromJSON()->lh86_wax_after
lh86_wax_after$product
```

    ##  [1] "粉紅生乳捲"         "極緻蒲燒鯛魚餐盒"   "御上蒲燒鰻魚餐盒"   "白飯"              
    ##  [5] "泡菜"               "韓式豆芽菜"         "韓式洋蔥絲"         "韓式涼拌毛豆仁"    
    ##  [9] "韓式高麗菜"         "韓式青花菜"         "胡麻洋蔥絲"         "胡麻豆腐"          
    ## [13] "胡麻青花菜"         "海帶芽湯"           "海帶芽豆腐湯"       "澄淨碧綠高山青"    
    ## [17] "鴻運當頭紅玉茶"     "上班搭地鐵觀音"     "清雅芬芳東方美人 "  "皇家錫蘭奶茶"      
    ## [21] "齒留茉香奶茶"       "爐火純青奶茶"       "炭燒鐵觀音奶茶"     "皇家錫蘭珍珠奶茶"  
    ## [25] "齒留茉香珍珠奶茶"   "爐火純青珍珠奶茶"   "炭燒鐵觀音珍珠奶茶" "可口可樂"          
    ## [29] "零卡"               "雪碧"

- 可以發現在before時只有計算到\[胡麻豆腐\]的價格
- after則是抓取\[御上蒲燒鰻魚餐盒、胡麻豆腐\]的價格
- 但熱門品項\[聖選之最舒肥牛板腱餐盒、御膳牛五花餐盒、滿肉饗宴牛五花燒肉丼、客選雙拼牛五花燒肉丼\]並未出現在wane時期的菜單裡，我猜測這幾個品項是蛋荒較趨緩時才推出的商品

##### **shopcode為e1iw店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wax_before["e1iw"],
                               average_menu_cost_wax_after["e1iw"]))
```

    ##   period averageCost
    ## 1 before     55.0000
    ## 2  after    257.8333

##### e1iw店家的熱門品項

``` r
popularItems["e1iw"]
```

    ## $e1iw
    ## [1] "【2號餐】"      "【3號餐】"      "【4號餐】"      "【5號全家餐】"  "【腿塊混搭餐】"
    ## [6] "波霸脆薯條(小)"

##### e1iw店家在wane_before的菜單

``` r
menu_wax$before["e1iw"]|>jsonlite::fromJSON()->e1iw_wax_before
e1iw_wax_before$product
```

    ##  [1] "胖老爹於門市販售之點心「花雕雞香腸」及「花枝丸」皆含豬肉及豬油製品，豬肉原產地皆為台灣，請消費者安心使用。"
    ##  [2] "本店每筆訂單酌收餐點包裝費1元"                                                                             
    ##  [3] "運彩足好運全家桶餐(不含飲料)"                                                                              
    ##  [4] "運彩足好運全家桶餐(含飲料)"                                                                                
    ##  [5] "「可口可樂」歡聚享樂套餐A"                                                                                 
    ##  [6] "1號餐"                                                                                                     
    ##  [7] "2號餐"                                                                                                     
    ##  [8] "3號餐"                                                                                                     
    ##  [9] "4號餐"                                                                                                     
    ## [10] "5號全家餐"                                                                                                 
    ## [11] "5號全家餐+飲料"                                                                                            
    ## [12] "6號全家特餐"                                                                                               
    ## [13] "全腿餐"                                                                                                    
    ## [14] "全塊餐"                                                                                                    
    ## [15] "混搭餐"                                                                                                    
    ## [16] "全翅餐"                                                                                                    
    ## [17] "全腿餐+飲料"                                                                                               
    ## [18] "全塊餐+飲料"                                                                                               
    ## [19] "全翅餐+飲料"                                                                                               
    ## [20] "混搭餐+飲料"                                                                                               
    ## [21] "紐奧良雞排餐+飲料"                                                                                         
    ## [22] "無骨雞腿排餐+飲料"                                                                                         
    ## [23] "雞腿"                                                                                                      
    ## [24] "雞塊"                                                                                                      
    ## [25] "雞翅"                                                                                                      
    ## [26] "胖雞丁(大)"                                                                                                
    ## [27] "紐奧良雞排"                                                                                                
    ## [28] "無骨雞腿排"                                                                                                
    ## [29] "花雕雞香腸"                                                                                                
    ## [30] "波霸脆薯條(小)"                                                                                            
    ## [31] "黃金地瓜條(大)"                                                                                            
    ## [32] "甜不辣"                                                                                                    
    ## [33] "薯餅"                                                                                                      
    ## [34] "洋蔥圈"                                                                                                    
    ## [35] "花枝丸"                                                                                                    
    ## [36] "山藥捲"                                                                                                    
    ## [37] "芝麻芋泥球"                                                                                                
    ## [38] "小芋泥球"                                                                                                  
    ## [39] "黃金魷米花"                                                                                                
    ## [40] "小雞塊"                                                                                                    
    ## [41] "披薩球"                                                                                                    
    ## [42] "煉乳醬包"                                                                                                  
    ## [43] "泰式雞排"                                                                                                  
    ## [44] "泰式雞翅"                                                                                                  
    ## [45] "泰式胖雞丁"                                                                                                
    ## [46] "泰式無骨雞腿排"                                                                                            
    ## [47] "泰式醬包"                                                                                                  
    ## [48] "可樂小寶特瓶350ML"                                                                                         
    ## [49] "雪碧小寶特瓶350ML"                                                                                         
    ## [50] "可樂大寶特瓶1.25公升"                                                                                      
    ## [51] "雪碧大寶特瓶1.25公升"                                                                                      
    ## [52] "蘋果蘇打大寶特瓶1.25公升"

##### e1iw店家在wane_after的菜單

``` r
menu_wax$after["e1iw"]|>jsonlite::fromJSON()->e1iw_wax_after
e1iw_wax_after$product
```

    ##  [1] "【1號餐】"                     "【2號餐】"                    
    ##  [3] "【3號餐】"                     "【4號餐】"                    
    ##  [5] "【5號全家餐】"                 "【5號全家餐(含飲料)】"        
    ##  [7] "【6號全家特餐】"               "【全腿餐】"                   
    ##  [9] "【全塊餐】"                    "【腿塊混搭餐】"               
    ## [11] "【全腿餐(含飲料)】"            "【全塊餐(含飲料)】"           
    ## [13] "【腿塊混搭餐(含飲料)】"        "【全翅餐】"                   
    ## [15] "【全翅餐(含飲料)】"            "【紐奧良雞排餐】"             
    ## [17] "【無骨雞腿排餐】"              "【One4如意分享餐】"           
    ## [19] "【雞翅分享餐】"                "【雙排點心餐】"               
    ## [21] "【雙人分享A餐】"               "【雙人分享B餐】"              
    ## [23] "【好四成雙餐】"                "【雙雙對對萬年富貴餐】"       
    ## [25] "【墜入愛河分享餐】"            "【腿翅分享A餐】"              
    ## [27] "【腿翅分享B餐】"               "【小三元套餐】"               
    ## [29] "【大三元套餐】"                "【小四喜套餐】"               
    ## [31] "【大四喜套餐】"                "【五福臨門餐】"               
    ## [33] "【六六大順餐】"                "【點心拼盤A餐】"              
    ## [35] "【點心拼盤B餐】"               "【小雞塊分享餐】"             
    ## [37] "【小雞Fun肆餐】"               "雞腿"                         
    ## [39] "雞塊"                          "雞翅"                         
    ## [41] "胖雞丁(大)"                    "紐奧良雞排"                   
    ## [43] "無骨雞腿排"                    "泰式胖雞丁"                   
    ## [45] "泰式雞排"                      "泰式無骨雞腿排"               
    ## [47] "泰式雞翅(4支)"                 "花雕雞香腸(1條)"              
    ## [49] "甜不辣(1份)"                   "花枝丸(4個)"                  
    ## [51] "山藥捲(4條)"                   "小芋泥球(6顆)"                
    ## [53] "黃金魷米花(1份)"               "波霸脆薯條(小)"               
    ## [55] "薯餅(3片)"                     "芝麻球(4顆)"                  
    ## [57] "小雞塊(5個)"                   "披薩球(4顆)"                  
    ## [59] "黃金地瓜條(大)"                "原味銀絲捲"                   
    ## [61] "煉乳銀絲捲"                    "杏鮑菇"                       
    ## [63] "辣椒粉(3小包)"                 "胡椒粉(3小包)"                
    ## [65] "泰式醬(1包)"                   "煉乳醬(1包)"                  
    ## [67] "可樂小寶特瓶350ml"             "雪碧小寶特瓶350ml"            
    ## [69] "  可樂大寶特瓶1250ml"          "蘋果蘇打大寶特瓶1250ml"       
    ## [71] "本店每筆訂單酌收餐點包裝費1元"

- 可以發現到造成價格的差異來自於品項名稱定義的不同，before的套餐皆無用【】符號。
- 假設before和after的套餐內容並無實際差別，且在before的”混搭餐”跟after的”腿塊混搭餐”是同樣商品，則抓出價格比較

``` r
data.frame(product=c("2號餐","3號餐","4號餐",
                     "5號全家餐","腿塊混搭餐", "波霸脆薯條(小)"),
           before=c(140,175,185,399,479,55),
           after=c(150,189,195,439,509,65))
```

    ##          product before after
    ## 1          2號餐    140   150
    ## 2          3號餐    175   189
    ## 3          4號餐    185   195
    ## 4      5號全家餐    399   439
    ## 5     腿塊混搭餐    479   509
    ## 6 波霸脆薯條(小)     55    65

- 可以發現到熱門品項的價格皆有上漲的趨勢，上漲的幅度大概在10元至40元不等

##### **shopcode為m8pq店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wax_before["m8pq"],
                               average_menu_cost_wax_after["m8pq"]))
```

    ##   period averageCost
    ## 1 before        60.0
    ## 2  after       272.6

##### m8pq店家的熱門品項

``` r
popularItems["m8pq"]
```

    ## $m8pq
    ## [1] "【2號餐】"      "【4號餐】"      "【5號全家餐】"  "【腿塊混搭餐】" "雞腿"          
    ## [6] "波霸脆薯條(小)"

##### m8pq店家在wane_before的菜單

``` r
menu_wax$before["m8pq"]|>jsonlite::fromJSON()->m8pq_wax_before
m8pq_wax_before$product
```

    ##  [1] "胖老爹於門市販售之點心「花雕雞香腸」及「花枝丸」皆含豬肉及豬油製品，豬肉原產地皆為台灣，請消費者安心使用。"
    ##  [2] "本店每筆訂單酌收餐點包裝費1元"                                                                             
    ##  [3] "1號餐"                                                                                                     
    ##  [4] "2號餐"                                                                                                     
    ##  [5] "3號餐"                                                                                                     
    ##  [6] "4號餐"                                                                                                     
    ##  [7] "5號全家餐"                                                                                                 
    ##  [8] "混搭餐"                                                                                                    
    ##  [9] "雞腿"                                                                                                      
    ## [10] "雞塊"                                                                                                      
    ## [11] "雞翅"                                                                                                      
    ## [12] "胖雞丁(大)"                                                                                                
    ## [13] "紐奧良雞排"                                                                                                
    ## [14] "無骨雞腿排"                                                                                                
    ## [15] "花雕雞香腸"                                                                                                
    ## [16] "波霸脆薯條(小)"                                                                                            
    ## [17] "波霸脆薯條(大)"                                                                                            
    ## [18] "黃金地瓜條(小)"                                                                                            
    ## [19] "薯餅"                                                                                                      
    ## [20] "洋蔥圈"                                                                                                    
    ## [21] "花枝丸"                                                                                                    
    ## [22] "山藥捲"                                                                                                    
    ## [23] "芝麻芋泥球"                                                                                                
    ## [24] "地瓜球"                                                                                                    
    ## [25] "蔥仔餅"                                                                                                    
    ## [26] "小芋泥球"                                                                                                  
    ## [27] "深海鱈魚條"                                                                                                
    ## [28] "黃金魷米花"                                                                                                
    ## [29] "奶香螺絲捲"                                                                                                
    ## [30] "小雞塊"                                                                                                    
    ## [31] "披薩球"                                                                                                    
    ## [32] "泰式雞排"                                                                                                  
    ## [33] "泰式雞翅"                                                                                                  
    ## [34] "泰式醬包"                                                                                                  
    ## [35] "可樂小寶特瓶350ML"                                                                                         
    ## [36] "雪碧小寶特瓶350ML"

##### m8pq店家在wane_after的菜單

``` r
menu_wax$after["m8pq"]|>jsonlite::fromJSON()->m8pq_wax_after
m8pq_wax_after$product
```

    ##  [1] "【1號餐】"                     "【2號餐】"                    
    ##  [3] "【4號餐】"                     "【5號全家餐】"                
    ##  [5] "【5號全家餐(含飲料)】"         "【6號全家特餐】"              
    ##  [7] "【全腿餐】"                    "【全塊餐】"                   
    ##  [9] "【腿塊混搭餐】"                "【全腿餐(含飲料)】"           
    ## [11] "【全塊餐(含飲料)】"            "【腿塊混搭餐(含飲料)】"       
    ## [13] "【全翅餐】"                    "【全翅餐(含飲料)】"           
    ## [15] "雞腿"                          "雞塊"                         
    ## [17] "雞翅"                          "無骨雞腿排"                   
    ## [19] "泰式雞翅(4支)"                 "花雕雞香腸(1條)"              
    ## [21] "黃金地瓜條(小)"                "洋蔥圈(6個)"                  
    ## [23] "花枝丸(4個)"                   "山藥捲(4條)"                  
    ## [25] "小芋泥球(6顆)"                 "黃金魷米花(1份)"              
    ## [27] "薯餅(3片)"                     "芝麻球(4顆)"                  
    ## [29] "地瓜球(4顆)"                   "深海鱈魚條(2條)"              
    ## [31] "奶香螺絲捲(2個)"               "小雞塊(5個)"                  
    ## [33] "披薩球(4顆)"                   "煉乳螺絲捲(2個)"              
    ## [35] "乳酪甜心酥(4顆)"               "玉米布丁酥"                   
    ## [37] "辣椒粉(3小包)"                 "胡椒粉(3小包)"                
    ## [39] "泰式醬(1包)"                   "可樂小寶特瓶350ml"            
    ## [41] "雪碧小寶特瓶350ml"             "  可樂大寶特瓶1250ml"         
    ## [43] "雪碧大寶特瓶1250ml"            "本店每筆訂單酌收餐點包裝費1元"

- 可以發現到這間店和第二間一樣都是胖老爹炸雞，熱門品項也大致相同（少了3號餐，多了雞腿的品項）。
- 比較特別的是熱門品項\[波霸脆薯條(小)\]並無出現在after的菜單裡，速食店居然會有沒賣薯條的時候。
- 一樣將它的價格取出並做比較及觀察

``` r
data.frame(product=c("2號餐","4號餐","5號全家餐",
                     "腿塊混搭餐","雞腿","波霸脆薯條(小)"),
           before=c(140,185,399,479,65,55),
           after=c(150,195,439,509,70,NA))
```

    ##          product before after
    ## 1          2號餐    140   150
    ## 2          4號餐    185   195
    ## 3      5號全家餐    399   439
    ## 4     腿塊混搭餐    479   509
    ## 5           雞腿     65    70
    ## 6 波霸脆薯條(小)     55    NA

- 可以發現到胖老爹熱門套餐類的漲幅都是相同的　　
- 由於有兩間是相同的胖老爹炸雞，但處於不同分店，再取出第四間店觀察

##### **shopcode為q8sf店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wax_before["q8sf"],
                               average_menu_cost_wax_after["q8sf"]))
```

    ##   period averageCost
    ## 1 before     41.0000
    ## 2  after    178.3333

##### q8sf店家的熱門品項

``` r
popularItems["q8sf"]
```

    ## $q8sf
    ## [1] "個人份雞肉【綜合部位】" "海帶根X2"               "A套餐：個人份雞肉5配菜"
    ## [4] "B套餐：半隻雞4配菜"     "C套餐：半隻雞7配菜"     "水蓮菜"

##### q8sf店家在wane_before的菜單

``` r
menu_wax$before["q8sf"]|>jsonlite::fromJSON()->q8sf_wax_before
q8sf_wax_before$product
```

    ##  [1] "半隻雞【去骨】"         "個人份雞肉【綜合部位】" "舒肥雞肉"              
    ##  [4] "洋蔥X2"                 "洋地瓜X2"               "海帶根X2"              
    ##  [7] "A套餐"                  "B套餐"                  "C套餐"                 
    ## [10] "D套餐"                  "E套餐"                  "F套餐"                 
    ## [13] "高麗菜"                 "花椰菜"                 "玉米筍"                
    ## [16] "四季豆"                 "黑木耳"                 "苦瓜"                  
    ## [19] "秋葵"                   "蓮藕"                   "小黃瓜"                
    ## [22] "洋蔥"                   "海帶根"                 "馬鈴薯"                
    ## [25] "龍鬚菜"                 "金針菇"                 "杏鮑菇"                
    ## [28] "筍片"                   "小香菇"                 "水蓮菜"                
    ## [31] "洋地瓜"                 "豆芽菜"                 "大豆干"                
    ## [34] "小豆干"                 "米血"                   "甜不辣"                
    ## [37] "鳥蛋"                   "百頁豆腐"               "豆皮"                  
    ## [40] "魚板豆腐"               "煙燻豬頭皮"             "柴魚白蘿蔔"            
    ## [43] "蜜糖紅蘿蔔"             "黑輪"                   "小貢丸"                
    ## [46] "滷海帶"                 "雞腸"                   "雞屁股"                
    ## [49] "雞蛋黃"                 "雞心"                   "雞胗"                  
    ## [52] "雞冠"                   "雞皮"                   "鹹度選擇"              
    ## [55] "口味選擇"               "不加料選擇"

##### q8sf店家在wane_after的菜單

``` r
menu_wax$after["q8sf"]|>jsonlite::fromJSON()->q8sf_wax_after
q8sf_wax_after$product
```

    ##  [1] "半隻雞【去骨】"         "個人份雞肉【綜合部位】" "舒肥雞肉"              
    ##  [4] "洋蔥X2"                 "洋地瓜X2"               "海帶根X2"              
    ##  [7] "A套餐：個人份雞肉5配菜" "B套餐：半隻雞4配菜"     "C套餐：半隻雞7配菜"    
    ## [10] "D套餐：半隻雞11配菜"    "E套餐：全雞10樣菜"      "F套餐：全雞14樣配菜"   
    ## [13] "高麗菜"                 "花椰菜"                 "玉米筍"                
    ## [16] "四季豆"                 "黑木耳"                 "苦瓜"                  
    ## [19] "秋葵"                   "小黃瓜"                 "洋蔥"                  
    ## [22] "海帶根"                 "馬鈴薯"                 "龍鬚菜"                
    ## [25] "金針菇"                 "杏鮑菇"                 "筍片"                  
    ## [28] "小香菇"                 "水蓮菜"                 "洋地瓜"                
    ## [31] "豆芽菜"                 "大溪黑豆乾"             "小豆干"                
    ## [34] "米血糕"                 "甜不辣"                 "百頁豆腐"              
    ## [37] "豆皮"                   "魚板豆腐"               "超薄豬頭皮"            
    ## [40] "柴魚白蘿蔔"             "蜜糖紅蘿蔔"             "黑輪"                  
    ## [43] "小貢丸"                 "滷海帶"                 "雞屁股"                
    ## [46] "雞心"                   "雞胗"                   "雞皮"                  
    ## [49] "鹹度選擇"               "口味選擇"               "不加料選擇"

- 可以觀察到造成物價上漲的原因也是來自於品項定義的不同，在before的名稱裡並無詳述餐點內容，但在after的套餐裡有詳細說明，如\[
  A套餐：個人份雞肉5配菜、B套餐：半隻雞4配菜、C套餐：半隻雞7配菜\]
- 假設套餐組合的內容物相同，取出價格比較

``` r
data.frame(product=c("個人份雞肉【綜合部位】","海帶根X2","A套餐：個人份雞肉5配菜",
                     "B套餐：半隻雞4配菜","C套餐：半隻雞7配菜","水蓮菜"),
           before=c(70,25,210,280,360,28),
           after=c(80,25,225,310,395,35))
```

    ##                  product before after
    ## 1 個人份雞肉【綜合部位】     70    80
    ## 2               海帶根X2     25    25
    ## 3 A套餐：個人份雞肉5配菜    210   225
    ## 4     B套餐：半隻雞4配菜    280   310
    ## 5     C套餐：半隻雞7配菜    360   395
    ## 6                 水蓮菜     28    35

- 套餐類皆漲15至35元不等，而水蓮菜的漲幅來到了25%，上漲的幅度驚人

##### 小結

- 會有超過100%的成本上漲率，第一個原因來自於菜單內容的改變，前期還未推出的產品在後期推出，會形成計算平均價格的差異；而第二個原因來自於品項名稱定義的差異，在這種情形前後期菜單是相同的，但在命名上的不同會造成before沒抓到熱門品項而after有抓到，形成平均價格差異甚大的狀況。但第二種情形還能用觀察的再抓出價格做比較

##### 二、觀察物價上漲率小於-1的店家，總共有4間

``` r
filtered_average_inflation_rate_wax|>dplyr::filter(inflation_rate<(-1))|>
  arrange(inflation_rate)
```

    ##      shopCode inflation_rate
    ## uvrf     uvrf      -1.562964
    ## wdl7     wdl7      -1.386294
    ## j0ev     j0ev      -1.252763
    ## r8ws     r8ws      -1.206193

##### 觀察是否跟前一章節相同，是因為品項名稱定義造成

##### **shopcode為uvrf店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wax_before["uvrf"],
                               average_menu_cost_wax_after["uvrf"]))
```

    ##   period averageCost
    ## 1 before    329.3333
    ## 2  after     69.0000

##### uvrf店家的熱門品項

``` r
popularItems["uvrf"]
```

    ## $uvrf
    ## [1] "鹽之花可頌 X2"      "北海道原味生乳包"   "白吐司"             "黑森林蛋糕【六吋】"
    ## [5] "冰黑咖啡"           "冰拿鐵"

##### uvrf店家在wane_before的菜單

``` r
menu_wax$before["uvrf"]|>jsonlite::fromJSON()->uvrf_wax_before
uvrf_wax_before$product
```

    ##   [1] "艾許奶酥"                        "艾許菠蘿"                       
    ##   [3] "鹽之花可頌"                      "艾許流沙菠蘿包"                 
    ##   [5] "雲朵生吐司"                      "芋花園小蛋糕"                   
    ##   [7] "巧克森林小蛋糕"                  "冰火菠蘿"                       
    ##   [9] "芋泥菠蘿包"                      "熊掌包"                         
    ##  [11] "沙拉肉鬆麵包"                    "蔥仔胖"                         
    ##  [13] "全麥肉鬆餐包"                    "花生菠蘿夾心麵包"               
    ##  [15] "維也納"                          "鹹奶油波蘿麵包"                 
    ##  [17] "日式紅豆麵包"                    "起酥肉脯麵包"                   
    ##  [19] "奶油捲麵包"                      "椰子奶酥"                       
    ##  [21] "花生捲捲"                        "辣醬德腸"                       
    ##  [23] "黑眼豆豆麵包"                    "德國香蒜麵包"                   
    ##  [25] "奶香包"                          "甜甜圈"                         
    ##  [27] "草莓甜甜圈"                      "丹麥藍莓"                       
    ##  [29] "丹麥巧克力菠蘿"                  "紫米桂圓核桃"                   
    ##  [31] "蜂蜜乳酪"                        "巧克力夏威夷豆塔"               
    ##  [33] "伯爵夏威夷豆塔"                  "小山園抹茶生巧克力生乳捲"       
    ##  [35] "草莓芋頭生乳捲"                  "黑雪森林蛋糕【四吋】"           
    ##  [37] "草莓皇冠蛋糕【四吋】"            "搖滾草莓蛋糕【六吋】"           
    ##  [39] "草莓嘉年華蛋糕【六吋】"          "黑森林蛋糕【六吋】"             
    ##  [41] "芋到愛蛋糕【六吋】"              "初心之戀蛋糕【六吋】"           
    ##  [43] "水果樂園蛋糕【六吋】"            "幸運之花蛋糕【六吋】"           
    ##  [45] "度假小恐龍蛋糕【六吋】"          "極速跑車蛋糕【六吋】"           
    ##  [47] "愛睏熊熊國度蛋糕【六吋】"        "彩虹獨角物語蛋糕【六吋】"       
    ##  [49] "獨角獸童話蛋糕【六吋】"          "約定夢幻島【六吋】"             
    ##  [51] "工程車隊長A蛋糕【六吋】"         "月光慶典C蛋糕【六吋】"          
    ##  [53] "消防小勇者蛋糕【六吋】"          "雅典娜蛋糕【六吋】"             
    ##  [55] "小小怪手王【六吋】"              "歡樂龍之谷蛋糕【六吋】"         
    ##  [57] "摯愛蛋糕【六吋】"                "疾風恐龍B【六吋】"              
    ##  [59] "芋到愛蛋糕【八吋】"              "搖滾草莓蛋糕【八吋】"           
    ##  [61] "黑森林蛋糕【八吋】"              "冰黑咖啡"                       
    ##  [63] "冰拿鐵"                          "冰焦糖瑪奇朵"                   
    ##  [65] "冰榛果提拉拿鐵"                  "冰重乳拿鐵"                     
    ##  [67] "冰玫瑰拿鐵"                      "冰經典左岸拿鐵"                 
    ##  [69] "熱黑咖啡"                        "熱拿鐵"                         
    ##  [71] "熱焦糖瑪奇朵"                    "熱榛果提拉拿鐵"                 
    ##  [73] "熱重乳拿鐵"                      "熱玫瑰拿鐵"                     
    ##  [75] "熱經典左岸拿鐵"                  "冰翡翠金萱"                     
    ##  [77] "冰四季春"                        "冰日月潭紅玉"                   
    ##  [79] "冰碳焙烏龍"                      "冰蘋果醋"                       
    ##  [81] "桑葚醋"                          "青梅果醋"                       
    ##  [83] "冰多苺果茶"                      "冰蜜桃冰茶"                     
    ##  [85] "冰韓式柚子茶"                    "冰經典鮮奶茶"                   
    ##  [87] "冰焦糖鮮奶茶"                    "冰黑糖鮮奶茶"                   
    ##  [89] "冰巧克歐蕾"                      "冰英式伯爵鮮奶茶"               
    ##  [91] "熱翡翠金萱"                      "熱四季春茶"                     
    ##  [93] "熱日月潭紅玉"                    "熱碳焙烏龍"                     
    ##  [95] "熱多莓果茶"                      "熱韓式柚子茶"                   
    ##  [97] "熱黑糖桂圓紅棗茶"                "熱經典鮮奶茶"                   
    ##  [99] "熱焦糖鮮奶茶"                    "熱黑糖鮮奶茶"                   
    ## [101] "熱義式巧克歐蕾"                  "熱英式伯爵鮮奶茶"               
    ## [103] "重量杯冰美式黑咖啡 "             "重量杯冰拿鐵 "                  
    ## [105] "重量杯左岸拿鐵 "                 "重量杯冰焦糖瑪奇朵 "            
    ## [107] "重量杯冰榛果提拉拿鐵 "           "重量杯冰重乳拿鐵 "              
    ## [109] "重量杯特濃拿鐵"                  "重量杯冰經典鮮奶茶 "            
    ## [111] "重量杯冰焦糖鮮奶茶 "             "重量杯冰巧克歐蕾 "              
    ## [113] "重量杯冰英式伯爵鮮奶茶 "         "重量杯冰黑糖鮮奶茶 "            
    ## [115] "重量杯熱美式黑咖啡 "             "重量杯熱拿鐵 "                  
    ## [117] "重量杯熱經典左岸拿鐵 "           "重量杯熱焦糖瑪奇朵 "            
    ## [119] "重量熱榛果堤拉拿鐵 "             "重量杯熱重乳拿鐵 "              
    ## [121] "重量杯熱經典鮮奶茶 "             "重量杯熱焦糖鮮奶茶 "            
    ## [123] "重量杯熱黑糖鮮奶茶 "             "重量杯熱巧克歐蕾 "              
    ## [125] "重量杯熱英式伯爵鮮奶茶 "         "本店每筆訂單酌收餐點包裝費2元。"

##### uvrf店家在wane_after的菜單

``` r
menu_wax$after["uvrf"]|>jsonlite::fromJSON()->uvrf_wax_after
uvrf_wax_after$product
```

    ##  [1] "艾許菠蘿"                        "芋花園小蛋糕"                   
    ##  [3] "冰火菠蘿"                        "草莓甜甜圈"                     
    ##  [5] "萌萌鹿異想世界【升級款 | 6吋】"  "小小怪手王【升級款 | 6吋】"     
    ##  [7] "月光慶典C【升級款 | 6吋】"       "幸運之花蛋糕【六吋】"           
    ##  [9] "雅典娜蛋糕【六吋】"              "黑森林蛋糕【八吋】"             
    ## [11] "芋到愛蛋糕【八吋】"              "水果樂園蛋糕【八吋】"           
    ## [13] "冰黑咖啡"                        "冰拿鐵"                         
    ## [15] "冰焦糖瑪奇朵"                    "冰榛果提拉拿鐵"                 
    ## [17] "冰重乳拿鐵"                      "冰玫瑰拿鐵"                     
    ## [19] "冰經典左岸拿鐵"                  "熱黑咖啡"                       
    ## [21] "熱拿鐵"                          "熱焦糖瑪奇朵"                   
    ## [23] "熱榛果提拉拿鐵"                  "熱重乳拿鐵"                     
    ## [25] "熱玫瑰拿鐵"                      "熱經典左岸拿鐵"                 
    ## [27] "冰翡翠金萱"                      "冰四季春"                       
    ## [29] "冰日月潭紅玉"                    "冰碳焙烏龍"                     
    ## [31] "冰蘋果醋"                        "桑葚醋"                         
    ## [33] "青梅果醋"                        "冰多苺果茶"                     
    ## [35] "冰蜜桃冰茶"                      "冰韓式柚子茶"                   
    ## [37] "冰經典鮮奶茶"                    "冰焦糖鮮奶茶"                   
    ## [39] "冰黑糖鮮奶茶"                    "冰巧克歐蕾"                     
    ## [41] "冰英式伯爵鮮奶茶"                "熱翡翠金萱"                     
    ## [43] "熱四季春茶"                      "熱日月潭紅玉"                   
    ## [45] "熱碳焙烏龍"                      "熱多莓果茶"                     
    ## [47] "熱韓式柚子茶"                    "熱黑糖桂圓紅棗茶"               
    ## [49] "熱經典鮮奶茶"                    "熱焦糖鮮奶茶"                   
    ## [51] "熱黑糖鮮奶茶"                    "熱義式巧克歐蕾"                 
    ## [53] "熱英式伯爵鮮奶茶"                "重量杯冰美式黑咖啡 "            
    ## [55] "重量杯冰拿鐵 "                   "重量杯左岸拿鐵 "                
    ## [57] "重量杯冰焦糖瑪奇朵 "             "重量杯冰榛果提拉拿鐵 "          
    ## [59] "重量杯冰重乳拿鐵 "               "重量杯特濃拿鐵"                 
    ## [61] "重量杯冰經典鮮奶茶 "             "重量杯冰焦糖鮮奶茶 "            
    ## [63] "重量杯冰巧克歐蕾 "               "重量杯冰英式伯爵鮮奶茶 "        
    ## [65] "重量杯冰黑糖鮮奶茶 "             "重量杯熱美式黑咖啡 "            
    ## [67] "重量杯熱拿鐵 "                   "重量杯熱經典左岸拿鐵 "          
    ## [69] "重量杯熱焦糖瑪奇朵 "             "重量熱榛果堤拉拿鐵 "            
    ## [71] "重量杯熱重乳拿鐵 "               "重量杯熱經典鮮奶茶 "            
    ## [73] "重量杯熱焦糖鮮奶茶 "             "重量杯熱黑糖鮮奶茶 "            
    ## [75] "重量杯熱巧克歐蕾 "               "重量杯熱英式伯爵鮮奶茶 "        
    ## [77] "本店每筆訂單酌收餐點包裝費2元。"

- 可以看出\[黑森林蛋糕【六吋】\]只出現在before的菜單裡，after只有八吋的黑森林蛋糕，而整模的蛋糕屬於菜單裡較高單價的商品(六吋黑森林蛋糕850、八吋黑森林蛋糕1063)，會使before的平均物價高出許多

##### **shopcode為wdl7店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wax_before["wdl7"],
                               average_menu_cost_wax_after["wdl7"]))
```

    ##   period averageCost
    ## 1 before         140
    ## 2  after          35

##### wdl7店家的熱門品項

``` r
popularItems["wdl7"]
```

    ## $wdl7
    ## [1] "香酥豬排餐盒（炸）"   "滷控肉餐盒"           "香酥雞排餐盒（炸）"  
    ## [4] "卡拉雞餐盒(炸)"       "香酥雞排（單點）"     "旗魚黑輪包蛋（單點）"

##### wdl7店家在wane_before的菜單

``` r
menu_wax$before["wdl7"]|>jsonlite::fromJSON()->wdl7_wax_before
wdl7_wax_before$product
```

    ##  [1] "梅干控肉餐盒"         "香酥雞排餐盒（炸）"   "旗魚黑輪（包蛋）餐盒"
    ##  [4] "MoMo百元餐盒"         "愛吃菜餐盒"           "香酥雞排"            
    ##  [7] "香酥豬排"             "旗魚黑輪（包蛋）"     "椰香奶酥厚片（甜）"  
    ## [10] "香蒜厚片（鹹）"       "抹茶厚片（甜）"       "細滑花生厚片（甜）"  
    ## [13] "顆粒花生厚片（鹹）"   "巧克力厚片（甜）"     "芋頭奶酥厚片【甜】"  
    ## [16] "布丁奶酥厚片【甜】"   "純奶酥厚片（甜）"     "可樂"                
    ## [19] "雪碧"

##### wdl7店家在wane_after的菜單

``` r
menu_wax$after["wdl7"]|>jsonlite::fromJSON()->wdl7_wax_after
wdl7_wax_after$product
```

    ##  [1] "瓜仔肉餐盒M"        "香酥雞排（單點）"   "香酥豬排(單點）"    "天婦羅炸蝦（單點）"
    ##  [5] "SOSO小資輕食套餐"   "巧克力厚片（甜）"   "椰香奶酥厚片（甜）" "抹茶厚片（甜）"    
    ##  [9] "細滑花生厚片（甜）" "顆粒花生厚片（鹹）" "香蒜厚片（鹹）"     "布丁奶酥厚片【甜】"
    ## [13] "芋頭奶酥厚片【甜】" "純奶酥厚片（甜）"   "可樂"               "雪碧（檸檬風味）"

- before和after的菜單有些許不同，而after又只抓取到\[香酥雞排（單點）\]的資料。想比較這個品項在前後期的價格，但發現如果以\[香酥雞排\]這個名稱對應，before的價格是50元而after是35元，有點好奇一般店家會一次降15元嗎？（還是內容物不同？）

``` r
data.frame(item=wdl7_wax_before$product,
           price=wdl7_wax_before$discountedPrice)|>
  dplyr::filter(item=="香酥雞排") -> wd17_before
data.frame(item=wdl7_wax_after$product,
           price=wdl7_wax_after$discountedPrice)|>
  dplyr::filter(item=="香酥雞排（單點）") -> wd17_after
bind_rows(wd17_before,wd17_after)
```

    ##               item price
    ## 1         香酥雞排    50
    ## 2 香酥雞排（單點）    35

##### **shopcode為j0ev店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wax_before["j0ev"],
                               average_menu_cost_wax_after["j0ev"]))
```

    ##   period averageCost
    ## 1 before         105
    ## 2  after          30

##### j0ev店家的熱門品項

``` r
popularItems["j0ev"]
```

    ## $j0ev
    ## [1] "招牌咖哩飯" "麻婆豆腐飯" "日式燒肉飯" "手工豆漿"

##### j0ev店家在wane_before的菜單

``` r
menu_wax$before["j0ev"]|>jsonlite::fromJSON()->j0ev_wax_before
j0ev_wax_before$product
```

    ## [1] "招牌咖哩飯"   "滷肉飯便當"   "麻婆豆腐飯"   "泡菜豬肉丼飯" "豬肉丼飯"    
    ## [6] "日式燒肉飯"   "手工豆漿"     "奶茶"

##### j0ev店家在wane_after的菜單

``` r
menu_wax$after["j0ev"]|>jsonlite::fromJSON()->j0ev_wax_after
j0ev_wax_after$product
```

    ## [1] "鮮肉水煎包"   "韭菜水煎包"   "高麗菜水煎包" "手工豆漿"     "奶茶"

- 此間店前後的商品差距甚大，不禁好奇這是哪間店？只有飲料的部分前後期相同，主食方面菜單大改。

##### **shopcode為r8ws店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wax_before["r8ws"],
                               average_menu_cost_wax_after["r8ws"]))
```

    ##   period averageCost
    ## 1 before    150.3333
    ## 2  after     45.0000

##### r8ws店家的熱門品項

``` r
popularItems["r8ws"]
```

    ## $r8ws
    ## [1] "港式凍檸茶X2"              "招牌家傳牛肉麵 日式拉麵"   "招牌家傳牛肉麵 手工刀削麵"
    ## [4] "清燉牛肉麵 日式拉麵"       "清燉牛肉麵 手工刀削麵"

##### r8ws店家在wane_before的菜單

``` r
menu_wax$before["r8ws"]|>jsonlite::fromJSON()->r8ws_wax_before
r8ws_wax_before$product
```

    ##  [1] "港式凍檸茶X2"                    "清燉牛肉湯麵【無肉】日式拉麵"   
    ##  [3] "紅燒牛肉湯麵【無肉】日式拉麵"    "清燉牛肉湯麵【無肉】手工刀削麵" 
    ##  [5] "紅燒牛肉湯麵【無肉】手工刀削麵"  "清燉牛肉麵 日式拉麵"            
    ##  [7] "清燉牛肉麵 手工刀削麵"           "凍檸茶"                         
    ##  [9] "凍檸樂"                          "凍檸七"                         
    ## [11] "冰絲襪奶茶"                      "冰鴛鴦奶茶"                     
    ## [13] "本店每筆訂單酌收餐點包裝費1元。"

##### r8ws店家在wane_after的菜單

``` r
menu_wax$after["r8ws"]|>jsonlite::fromJSON()->r8ws_wax_after
r8ws_wax_after$product
```

    ## [1] "港式凍檸茶X2"                    "胡麻玉米筍"                     
    ## [3] "胡麻花椰菜"                      "凍檸茶"                         
    ## [5] "凍檸樂"                          "凍檸七"                         
    ## [7] "冰絲襪奶茶"                      "冰鴛鴦奶茶"                     
    ## [9] "本店每筆訂單酌收餐點包裝費1元。"

- after的菜單裡主食都消失了，只剩飲料部分還存在

#### 蛋荒較趨緩時期

##### 一、先觀察物價上漲率大於1的店家，總共有20間

``` r
filtered_average_inflation_rate_wane|>
  dplyr::filter(inflation_rate>1)|>
  arrange(desc(inflation_rate))
```

    ##      shopCode inflation_rate
    ## k5al     k5al       2.015245
    ## w88l     w88l       1.937942
    ## kccq     kccq       1.394327
    ## r8ws     r8ws       1.360407
    ## vd0e     vd0e       1.324292
    ## l37o     l37o       1.303895
    ## wdl7     wdl7       1.280934
    ## il9w     il9w       1.264462
    ## jg2r     jg2r       1.243582
    ## edqs     edqs       1.238402
    ## j05a     j05a       1.176179
    ## wp6x     wp6x       1.167169
    ## cii4     cii4       1.143374
    ## dgj1     dgj1       1.140915
    ## cf1p     cf1p       1.120591
    ## v3nv     v3nv       1.069150
    ## jz50     jz50       1.059472
    ## chpw     chpw       1.040343
    ## z1xk     z1xk       1.029619
    ## pb2n     pb2n       1.023939

##### *再取出物價上漲率最高的三間做觀察*

##### **shopcode為k5al店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wane_before["k5al"],
                               average_menu_cost_wane_after["k5al"]))
```

    ##   period averageCost
    ## 1 before        39.0
    ## 2  after       292.6

##### k5al店家的熱門品項

``` r
popularItems["k5al"]
```

    ## $k5al
    ## [1] "熟成嫩肩牛排300gミスジ Blade steak"       
    ## [2] "熟成骰子牛200gサイコロ牛 Diced beef steak"
    ## [3] "熟成骰子牛300gサイコロ牛 Diced beef steak"
    ## [4] "起司漢堡排Hamburg"                        
    ## [5] "豬排250g/豚ステーキpork chop"             
    ## [6] "馬鈴薯沙拉"

##### k5al店家在wane_before的菜單

``` r
menu_wane$before["k5al"]|>jsonlite::fromJSON()->k5al_wane_before
k5al_wane_before$product
```

    ##  [1] "熟成嫩肩牛排300g"          "安格斯混切骰子牛200g"      "安格斯混切骰子牛300g"     
    ##  [4] "舒肥雞腿排"                "蔥鹽牛舌(薄切）100g"       "熟成嫩肩牛排200g"         
    ##  [7] "安格斯混切骰子牛（500g)"   "安格斯肋眼心300g"          "特上熟成嫩肩牛排200g"     
    ## [10] "安格斯翼板牛排200g"        "安格斯翼板牛排300g"        "特製漢堡排(牛）"          
    ## [13] "豬排"                      "香煎鯖魚"                  "黑胡椒牛肉蓋飯"           
    ## [16] "蝦多多蓋飯"                "咖哩牛肉蓋飯"              "白飯"                     
    ## [19] "溫泉卵"                    "蔥鹽四倍量"                "日式滷蛋"                 
    ## [22] "鐵板蛋"                    "例湯"                      "時蔬（胡麻龍鬚菜）"       
    ## [25] "香煎干貝（2顆）"           "溫泉卵+時蔬（胡麻龍鬚菜）" "溫泉卵+馬鈴薯沙拉"        
    ## [28] "馬鈴薯沙拉"                "香煎蝦仁（3隻）"           "香煎蝦仁（6隻）"          
    ## [31] "岩海苔"                    "炸蒜片"

##### k5al店家在wane_after的菜單

``` r
menu_wane$after["k5al"]|>jsonlite::fromJSON()->k5al_wane_after
k5al_wane_after$product
```

    ##  [1] "熟成嫩肩牛排300gミスジ Blade steak"        
    ##  [2] "熟成骰子牛200gサイコロ牛 Diced beef steak" 
    ##  [3] "熟成骰子牛300gサイコロ牛 Diced beef steak" 
    ##  [4] "舒肥雞腿排/雞もも肉sous vide thigh"        
    ##  [5] "薄切蔥鹽牛舌150g薄切りタン beef tongue"    
    ##  [6] "熟成嫩肩牛排200gミスジ Blade steak"        
    ##  [7] "熟成骰子牛500gサイコロ牛 Diced beef steak" 
    ##  [8] "安格斯肋眼心牛排300gリブ芯"                
    ##  [9] "特上熟成嫩肩牛排200g特上ミスジ Blade steak"
    ## [10] "豬排250g/豚ステーキpork chop"              
    ## [11] "牛肩小排200g Short rib boneless"           
    ## [12] "特上厚切牛舌150g厚切りタンBeef Tongue"     
    ## [13] "特上熟成嫩肩牛排300g特上ミスジ Blade steak"
    ## [14] "深海大魷魚/イカsquid"                      
    ## [15] "黑牛燒肉便當"                              
    ## [16] "豬排便當"                                  
    ## [17] "炸豬排便當"                                
    ## [18] "炸魚排便當"                                
    ## [19] "白飯"                                      
    ## [20] "溫泉卵"                                    
    ## [21] "蔥鹽四倍量"                                
    ## [22] "日式滷蛋"                                  
    ## [23] "鐵板蛋"                                    
    ## [24] "例湯"                                      
    ## [25] "時蔬（胡麻龍鬚菜）"                        
    ## [26] "溫泉卵+時蔬（胡麻龍鬚菜）"                 
    ## [27] "溫泉卵+馬鈴薯沙拉"                         
    ## [28] "馬鈴薯沙拉"                                
    ## [29] "岩海苔"                                    
    ## [30] "炸蒜片"                                    
    ## [31] "日式炸豬排"                                
    ## [32] "日式炸豬排（雙倍）"                        
    ## [33] "白身魚"                                    
    ## [34] "薯條"                                      
    ## [35] "爆漿熔岩蝦球2顆（非常燙、請小心食用）"     
    ## [36] "紅龍炸雞塊5塊"

- 可以發現到在after的菜單裡除了中文以外還加入了日文及英文，造成抓取品項名稱的差異
- 取出前後期價格來比較

``` r
k5al_before<- data.frame(item=k5al_wane_before$product,
                         price=k5al_wane_before$discountedPrice)
k5al_after<- data.frame(item=k5al_wane_after$product,
                         price=k5al_wane_after$discountedPrice)

data.frame(product=c("熟成嫩肩牛排300gミスジ Blade steak",
                     "熟成骰子牛200gサイコロ牛 Diced beef steak",
                     "熟成骰子牛300gサイコロ牛 Diced beef steak",
                     "起司漢堡排Hamburg",
                     "豬排250g/豚ステーキpork chop",
                     "馬鈴薯沙拉"),
           before=c(438,328,438,NA,220,39),
           after=c(438,328,438,NA,220,39))
```

    ##                                     product before after
    ## 1        熟成嫩肩牛排300gミスジ Blade steak    438   438
    ## 2 熟成骰子牛200gサイコロ牛 Diced beef steak    328   328
    ## 3 熟成骰子牛300gサイコロ牛 Diced beef steak    438   438
    ## 4                         起司漢堡排Hamburg     NA    NA
    ## 5              豬排250g/豚ステーキpork chop    220   220
    ## 6                                馬鈴薯沙拉     39    39

- 假設before的\[安格斯混切骰子牛\]就是after的\[熟成骰子牛\]，比較前後期差異可以發現到這間店的價格其實沒有調漲

##### **shopcode為w88l店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wane_before["w88l"],
                               average_menu_cost_wane_after["w88l"]))
```

    ##   period averageCost
    ## 1 before        45.0
    ## 2  after       312.5

##### w88l店家的熱門品項

``` r
popularItems["w88l"]
```

    ## $w88l
    ## [1] "聰明洛梅飲"               "可口可樂"                 "中包菜(半熟)加魚肉"      
    ## [4] "大沙鍋菜(半熟)加中頭加肉" "大菜【半熟】加中鰱魚頭"   "大沙鍋菜(半熟)加魚肉"

##### w88l店家在wane_before的菜單

``` r
menu_wane$before["w88l"]|>jsonlite::fromJSON()->w88l_wane_before
w88l_wane_before$product
```

    ##  [1] "沙鍋菜魚肉套餐"                                                                                                                   
    ##  [2] "沙鍋菜套餐"                                                                                                                       
    ##  [3] "沙鍋菜冬粉、紅茶"                                                                                                                 
    ##  [4] "冷凍沙鍋菜"                                                                                                                       
    ##  [5] "沙鍋菜(不含魚)"                                                                                                                   
    ##  [6] "沙鍋菜加魚肉"                                                                                                                     
    ##  [7] "沙鍋菜、冬粉"                                                                                                                     
    ##  [8] "沙鍋菜、烏龍麵"                                                                                                                   
    ##  [9] "白飯"                                                                                                                             
    ## [10] "雞肉飯"                                                                                                                           
    ## [11] "太陽蛋滷肉飯"                                                                                                                     
    ## [12] "滷肉飯"                                                                                                                           
    ## [13] "古早味紅茶"                                                                                                                       
    ## [14] "聰明洛梅飲"                                                                                                                       
    ## [15] "清冬粉"                                                                                                                           
    ## [16] "大沙鍋菜"                                                                                                                         
    ## [17] "中沙鍋菜"                                                                                                                         
    ## [18] "小沙鍋菜"                                                                                                                         
    ## [19] "中鰱魚頭"                                                                                                                         
    ## [20] "魚肉"                                                                                                                             
    ## [21] "1.本店每筆訂單酌收餐點包裝費2元    2.如勾選不需要免洗餐具則不附碗    3.本店皆使用台灣豬肉，非基改豆腐、豆皮、蔥、洋蔥、辣椒、白菜"

##### w88l店家在wane_after的菜單

``` r
menu_wane$after["w88l"]|>jsonlite::fromJSON()->w88l_wane_after
w88l_wane_after$product
```

    ## [1] "1.本店每筆訂單酌收餐點包裝費2元    2.如勾選不需要免洗餐具則不附碗    3.本店皆使用台灣豬肉，非基改豆腐、豆皮、蔥、洋蔥、辣椒、白菜"
    ## [2] "古早味紅茶"                                                                                                                       
    ## [3] "聰明洛梅飲"                                                                                                                       
    ## [4] "可口可樂"                                                                                                                         
    ## [5] "中包菜(半熟)加魚肉"                                                                                                               
    ## [6] "大沙鍋菜(半熟)加中頭加肉"                                                                                                         
    ## [7] "大菜【半熟】加中鰱魚頭"                                                                                                           
    ## [8] "大沙鍋菜(半熟)加魚肉"

- 可以發現這間店的前後期商品內容物不盡相同，before是以大、中、小沙鍋菜販售，after則是除了沙鍋菜外有加入其他肉品做綁售，此間店家的前後期價格較難以同一標準做比較。

##### **shopcode為kccq店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wane_before["kccq"],
                               average_menu_cost_wane_after["kccq"]))
```

    ##   period averageCost
    ## 1 before        55.8
    ## 2  after       225.0

##### kccq店家的熱門品項

``` r
popularItems["kccq"]
```

    ## $kccq
    ## [1] "(8葷12素)小鮮肉麻辣拌(乾拌)" "(8葷12素)小鮮肉麻辣燙(好湯)"
    ## [3] "(3葷12素)小仙女麻辣拌(乾拌)" "麻辣鴨血"                   
    ## [5] "涼皮"                        "三合一湯"

##### kccq店家在wane_before的菜單

``` r
menu_wane$before["kccq"]|>jsonlite::fromJSON()->kccq_wane_before
kccq_wane_before$product
```

    ##  [1] "小鮮肉麻辣燙"         "小仙女麻辣燙"         "雙椒麻辣燙"          
    ##  [4] "麻辣鴨血"             "滷肉飯便當(附溏心蛋)" "彩盒涼皮(葷)"        
    ##  [7] "滷肉飯"               "椒香滷肉飯"           "花椒麻辣燙"          
    ## [10] "藤椒麻辣燙"           "涼皮"                 "涼皮（斤）"          
    ## [13] "涼麵【中】"           "涼麵【大】"           "彩盒涼麵(葷)"        
    ## [16] "香辣涼皮鍋"           "札幌味噌鍋"           "韓式泡菜鍋"          
    ## [19] "川香銷魂湯麵"         "札幌味噌湯麵"         "韓式泡菜湯麵"        
    ## [22] "味噌湯"               "味噌蛋"               "味噌貢丸"            
    ## [25] "三合一湯"             "方塊豆干"             "韓國泡菜"            
    ## [28] "涼拌黃瓜"             "涼拌黑木耳"           "百香果冰粉"          
    ## [31] "檸檬冰粉"

##### kccq店家在wane_after的菜單

``` r
menu_wane$after["kccq"]|>jsonlite::fromJSON()->kccq_wane_after
kccq_wane_after$product
```

    ##  [1] "(8葷12素)小鮮肉麻辣拌(乾拌)" "(8葷12素)小鮮肉麻辣燙(好湯)"
    ##  [3] "(3葷12素)小仙女麻辣拌(乾拌)" "(3葷12素)小仙女麻辣燙(好湯)"
    ##  [5] "方塊豆干"                    "韓國泡菜"                   
    ##  [7] "涼拌黃瓜"                    "涼拌黑木耳"                 
    ##  [9] "百香果冰粉"                  "檸檬冰粉"

- 可以發現這間店也是因為命名上的差異造成物價上漲率之高，比較兩者價格

``` r
kccq_before<- data.frame(item=kccq_wane_before$product,
                         price=kccq_wane_before$discountedPrice)
kccq_after<- data.frame(item=kccq_wane_after$product,
                         price=kccq_wane_after$discountedPrice)

data.frame(product=c("(8葷12素)小鮮肉麻辣拌(乾拌)",
                     "(8葷12素)小鮮肉麻辣燙(好湯)",
                     "(3葷12素)小仙女麻辣拌(乾拌)",
                     "麻辣鴨血","涼皮","三合一湯"),
           before=c(NA,152.1,NA,45,72.9,49.5),
           after=c(235,235,205,NA,NA,NA))
```

    ##                       product before after
    ## 1 (8葷12素)小鮮肉麻辣拌(乾拌)     NA   235
    ## 2 (8葷12素)小鮮肉麻辣燙(好湯)  152.1   235
    ## 3 (3葷12素)小仙女麻辣拌(乾拌)     NA   205
    ## 4                    麻辣鴨血   45.0    NA
    ## 5                        涼皮   72.9    NA
    ## 6                    三合一湯   49.5    NA

- 前後期菜單有改變，唯一在前後期都有的商品是\[小鮮肉麻辣燙\]，但漲了83元，讓我好奇兩個品項名稱雖然一樣但內容物是否不同？

##### 二、觀察物價上漲率小於-1的店家，總共有11間

``` r
filtered_average_inflation_rate_wane|>dplyr::filter(inflation_rate<(-1))|>
  arrange(inflation_rate)
```

    ##      shopCode inflation_rate
    ## u1r2     u1r2      -1.805005
    ## we7f     we7f      -1.582409
    ## d1ls     d1ls      -1.494508
    ## cysg     cysg      -1.293129
    ## pv5o     pv5o      -1.273706
    ## wegr     wegr      -1.259543
    ## alib     alib      -1.258040
    ## b5cu     b5cu      -1.168680
    ## yrcc     yrcc      -1.140915
    ## y1nj     y1nj      -1.089684
    ## b5vu     b5vu      -1.054621

##### **shopcode為u1r2店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wane_before["u1r2"],
                               average_menu_cost_wane_after["u1r2"]))
```

    ##   period averageCost
    ## 1 before       182.4
    ## 2  after        30.0

##### u1r2店家的熱門品項

``` r
popularItems["u1r2"]
```

    ## $u1r2
    ## [1] "泰式打抛雞套餐"     "蒜香台灣豬肉片套餐" "法式水煮嫩雞胸套餐" "義國風情雞腿排套餐"
    ## [5] "阿嬤的滷牛腱心套餐" "13香滷蛋【1顆】"

##### u1r2店家在wane_before的菜單

``` r
menu_wane$before["u1r2"]|>jsonlite::fromJSON()->u1r2_wane_before
u1r2_wane_before$product
```

    ##  [1] "泰式打抛雞套餐"               "蒜香台灣豬肉片套餐"          
    ##  [3] "法式水煮嫩雞胸套餐"           "地中海烤食蔬套餐"            
    ##  [5] "匈牙利辣烤雞胸套餐"           "義國風情雞腿排套餐"          
    ##  [7] "阿嬤的滷牛腱心套餐"           "挪威鹽烤鯖魚套餐"            
    ##  [9] "清爽雞肉套餐"                 "清爽豬肉套餐"                
    ## [11] "泰式雞豬套餐"                 "泰式雞情套餐"                
    ## [13] "海陸大餐套餐"                 "十穀飯【1碗】"               
    ## [15] "地瓜【1份】"                  "青菜【1份】"                 
    ## [17] "溏心蛋【1顆】"                "冷泡茶【1瓶 | 甜度冰量固定】"

##### u1r2店家在wane_after的菜單

``` r
menu_wane$after["u1r2"]|>jsonlite::fromJSON()->u1r2_wane_after
u1r2_wane_after$product
```

    ## [1] "十穀飯【1碗】"                "地瓜【1塊】"                 
    ## [3] "青菜【1份】"                  "13香滷蛋【1顆】"             
    ## [5] "冷泡茶【1瓶 | 甜度冰量固定】"

- after的菜單裡只剩配菜及飲料，主食皆無出現，難以比較前後期價格差異

##### **shopcode為we7f店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wane_before["we7f"],
                               average_menu_cost_wane_after["we7f"]))
```

    ##   period averageCost
    ## 1 before         146
    ## 2  after          30

##### we7f店家的熱門品項

``` r
popularItems["we7f"]
```

    ## $we7f
    ## [1] "明爐燒鴨"   "雙囍臨門"   "三寶惦記"   "玫瑰油雞腿" "四大天王"   "冰紅茶"

##### we7f店家在wane_before的菜單

``` r
menu_wane$before["we7f"]|>jsonlite::fromJSON()->we7f_wane_before
we7f_wane_before$product
```

    ##  [1] "明爐燒鴨"         "雙囍臨門"         "三寶惦記"         "金牌香腸"        
    ##  [5] "蜜汁叉燒"         "脆皮燒肉"         "玫瑰油雞腿"       "四大天王"        
    ##  [9] "五樣都來"         "叉燒肉【一斤】"   "蔥油"             "半隻鴨"          
    ## [13] "白飯"             "雞腿"             "滷蛋"             "辣椒醬油"        
    ## [17] "新鮮的鹹蛋"       "脆皮燒肉【一斤】" "香腸【半斤】"     "鴨頭"

##### we7f店家在wane_after的菜單

``` r
menu_wane$after["we7f"]|>jsonlite::fromJSON()->we7f_wane_after
we7f_wane_after$product
```

    ##  [1] "蔥油"             "半隻鴨"           "白飯"             "雞腿"            
    ##  [5] "辣椒醬油"         "新鮮的鹹蛋"       "脆皮燒肉【一斤】" "香腸【半斤】"    
    ##  [9] "鴨頭"             "冰紅茶"

- 前後期菜單有些許不同，但比較兩期皆有的主食\[半隻鴨\]，價格皆為800，並無作價格上的調整

##### **shopcode為d1ls店家**

``` r
data.frame(period=c("before","after"),
                 averageCost=c(average_menu_cost_wane_before["d1ls"],
                               average_menu_cost_wane_after["d1ls"]))
```

    ##   period averageCost
    ## 1 before         312
    ## 2  after          70

##### d1ls店家的熱門品項

``` r
popularItems["d1ls"]
```

    ## $d1ls
    ## [1] "6入甜甜圈"      "10入甜甜圈"     "檸檬優格波堤"   "檸檬蜜糖波堤\n" "哞~草莓牛奶"   
    ## [6] "皇家伯爵茶歐蕾"

##### d1ls店家在wane_before的菜單

``` r
menu_wane$before["d1ls"]|>jsonlite::fromJSON()->d1ls_wane_before
d1ls_wane_before$product
```

    ##  [1] "如果選擇品項售完，由夥伴隨機幫您挑選喔！"        
    ##  [2] "圖片僅供參考，依實際門市提供餐點為主。"          
    ##  [3] "如對訂單有任何疑問，請與外送平台客服聯繫，謝謝！"
    ##  [4] "優惠餐組數量有限，售完為止；無法點購即本日結束。"
    ##  [5] "本店使用豬肉之原產地：台灣"                      
    ##  [6] "6入甜甜圈"                                       
    ##  [7] "10入甜甜圈"                                      
    ##  [8] "歡樂派對"                                        
    ##  [9] "一〇八抹茶茶廊豆香抹茶生波堤\\n"                 
    ## [10] "一〇八抹茶茶廊雙層豆香抹茶生波堤\\n"             
    ## [11] "一〇八抹茶茶廊蜜糖抹茶波堤\\n"                   
    ## [12] "蜜糖波堤"                                        
    ## [13] "雙層巧克力波堤"                                  
    ## [14] "草莓波堤"                                        
    ## [15] "草莓巧克力波堤"                                  
    ## [16] "蜜糖巧克力波堤"                                  
    ## [17] "卡士達法蘭奇"                                    
    ## [18] "天使法蘭奇"                                      
    ## [19] "巧克力歐菲香"                                    
    ## [20] "青醬燻雞Mini披薩\\n"                             
    ## [21] "北海道雙色乳酪瑪芬"                              
    ## [22] "粉莓香橙蘇打"                                    
    ## [23] "粉莓香橙冰茶"                                    
    ## [24] "熱草莓烏龍茶"                                    
    ## [25] "熱琥珀烏龍茶"                                    
    ## [26] "「可爾必思」"                                    
    ## [27] "台灣無糖青茶"                                    
    ## [28] "美式珈琲"                                        
    ## [29] "皇家伯爵紅茶"                                    
    ## [30] "蜂蜜桔子茶"                                      
    ## [31] "蘋果紅茶"

##### d1ls店家在wane_after的菜單

``` r
menu_wane$after["d1ls"]|>jsonlite::fromJSON()->d1ls_wane_after
d1ls_wane_after$product
```

    ##  [1] "如果選擇品項售完，由夥伴隨機幫您挑選喔！"               
    ##  [2] "圖片僅供參考，依實際門市提供餐點為主。"                 
    ##  [3] "如對訂單有任何疑問，請與外送平台客服聯繫，謝謝！"       
    ##  [4] "優惠餐組數量有限，售完為止；無法點購即本日結束。"       
    ##  [5] "本店使用豬肉之原產地：台灣 本店使用牛肉之原產地：巴拉圭"
    ##  [6] "哞~愛文芒果牛奶 \\u3000"                                
    ##  [7] "翡翠檸檬青茶\\n"                                        
    ##  [8] "蜂蜜檸檬飲\\n"                                          
    ##  [9] "愛文芒果可爾必思氣泡\\n"                                
    ## [10] "熱琥珀烏龍茶"                                           
    ## [11] "摩卡珈琲"                                               
    ## [12] "可可伯爵茶歐蕾"                                         
    ## [13] "卡布奇諾"                                               
    ## [14] "「可爾必思」"                                           
    ## [15] "台灣無糖青茶"                                           
    ## [16] "美式珈琲"                                               
    ## [17] "拿鐵珈琲"                                               
    ## [18] "皇家伯爵紅茶"                                           
    ## [19] "蜂蜜桔子茶"                                             
    ## [20] "蘋果紅茶"                                               
    ## [21] "皇家伯爵茶歐蕾"

- 由品項名稱可以猜測此間店應該是賣甜甜圈及飲料的店家，但在after的菜單並無出現任何甜甜圈的品項，有可能是品項已售完？

``` r
set.seed(1)

sample_df <- data.frame(
  group = factor(rep(letters[1:3], each = 10)),
  value = rnorm(30)
)

group_means_df <- setNames(
  aggregate(value ~ group, sample_df, mean),
  c("group", "group_mean")
)

# The following three code blocks create the same graphic, each using one
# of the three patterns specified above. In each graphic, the sample data
# are plotted in the first layer and the group means data frame is used to
# plot larger red points on top of the sample data in the second layer.

# Pattern 1
# Both the `data` and `mapping` arguments are passed into the `ggplot()`
# call. Those arguments are omitted in the first `geom_point()` layer
# because they get passed along from the `ggplot()` call. Note that the
# second `geom_point()` layer re-uses the `x = group` aesthetic through
# that mechanism but overrides the y-position aesthetic.
ggplot(data = sample_df, mapping = aes(x = group, y = value)) +
  geom_point() +
  geom_point(
    mapping = aes(y = group_mean), data = group_means_df,
    colour = 'red', size = 3
  )
```

![](/../../raw/main/docs/md/MenuCost_files/figure-gfm/unnamed-chunk-68-1.png)<!-- -->
